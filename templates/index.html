<!DOCTYPE html>
<html>
<head>
    <title>Intelligent SAN Demo</title>
</head>
<body>
    <h1>Intelligent Erasure-Coded SAN</h1>

    <h2>Upload File</h2>
    <form method="post" action="/upload" enctype="multipart/form-data">
        <input type="file" name="file" required>
        <button type="submit">Upload & Encode</button>
    </form>

    <h2>Request File</h2>
    <select id="filename-select">
        {% for file in files %}
        <option value="{{ file }}">{{ file }}</option>
        {% endfor %}
    </select>

    <select id="role-select">
        <option value="faculty">Faculty</option>
        <option value="student">Student</option>
        <option value="admin">Admin</option>
    </select>

    <button type="button" onclick="openPDF()">Retrieve & Open PDF</button>

    <h2>Retrieved File</h2>
    <p id="retrieval-info"></p>
    <iframe id="pdf-frame" width="100%" height="600px"></iframe>

    <script>
    function openPDF() {
        var filename = document.getElementById("filename-select").value;
        var role = document.getElementById("role-select").value;
        document.getElementById("retrieval-info").innerText =
            `File: ${filename} | Retrieved as: ${role} | Time: ${new Date().toLocaleString()}`;
        document.getElementById("pdf-frame").src = `/request_file/${filename}/${role}`;
    }
    </script>
</body>
</html>
